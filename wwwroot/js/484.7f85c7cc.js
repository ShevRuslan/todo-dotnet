"use strict";(self["webpackChunkclientapp"]=self["webpackChunkclientapp"]||[]).push([[484],{6484:(e,l,t)=>{t.r(l),t.d(l,{default:()=>de});var a=t(9835);function n(e,l,t,n,o,u){const s=(0,a.up)("FormCreateVue"),d=(0,a.up)("TodoList"),i=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(i,{class:"q-pa-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(s),(0,a.Wm)(d)])),_:1})}function o(e,l,t,n,o,u){const s=(0,a.up)("q-input"),d=(0,a.up)("q-file"),i=(0,a.up)("q-checkbox"),r=(0,a.up)("q-btn"),c=(0,a.up)("q-card-section"),m=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(m,{class:"wrapper-form"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"form"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{outlined:"",modelValue:e.name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.name=l),label:"Название",dense:""},null,8,["modelValue"]),(0,a.Wm)(s,{outlined:"",modelValue:e.content,"onUpdate:modelValue":l[1]||(l[1]=l=>e.content=l),label:"Контент",dense:""},null,8,["modelValue"]),(0,a.Wm)(d,{outlined:"",modelValue:e.photo,"onUpdate:modelValue":l[2]||(l[2]=l=>e.photo=l),label:"Фотография",dense:""},null,8,["modelValue"]),(0,a.Wm)(i,{modelValue:e.important,"onUpdate:modelValue":l[3]||(l[3]=l=>e.important=l),label:"Важное"},null,8,["modelValue"]),(0,a.Wm)(r,{color:"primary",label:"Создать",onClick:e.createTODO,dense:"",class:"button-create"},null,8,["onClick"]),(0,a.Wm)(d,{outlined:"",modelValue:e.file,"onUpdate:modelValue":l[4]||(l[4]=l=>e.file=l),label:"Файл БД",dense:"",class:"q-ml-xl"},null,8,["modelValue"]),(0,a.Wm)(r,{color:"primary",label:"Загрузить файл",onClick:e.importDB,dense:"",class:"button-create"},null,8,["onClick"]),(0,a.Wm)(r,{color:"primary",label:"Скачать файл",onClick:e.exportDB,dense:"",class:"button-create"},null,8,["onClick"]),(0,a.Wm)(r,{color:"negative",label:"Удалить всё",onClick:e.deleteAll,dense:"",class:"button-create"},null,8,["onClick"])])),_:1})])),_:1})}var u=t(499),s=t(5148),d=t.n(s),i=t(9981),r=t.n(i);class c{constructor(){d()(this,"getResource",(async(e,l,t,a={},n)=>{let o=null;return o=await r()({url:`api/${e}`,method:t,data:l,params:n,headers:{"Content-Type":"application/json",...a}}),o.data})),d()(this,"createTODO",(async e=>{let l="todo/createTODO";const t=await this.getResource(l,e,"POST",null,null);return t})),d()(this,"deleteTODO",(async e=>{let l=`todo/delete/${e}`;const t=await this.getResource(l,null,"GET",null,null);return t})),d()(this,"getTodoElement",(async()=>{let e="todo/getElements";const l=await this.getResource(e,null,"GET",null,null);return l})),d()(this,"changeIsDone",(async e=>{let l="todo/changeIsDone";const t=await this.getResource(l,e,"POST",null,null);return t})),d()(this,"editTodo",(async e=>{let l="todo/edit";const t=await this.getResource(l,e,"POST",null,null);return t})),d()(this,"getAllDates",(async()=>{let e="todo/getAllDates";const l=await this.getResource(e,null,"GET",null,null);return l})),d()(this,"getStatics",(async()=>{let e="todo/getStatics";const l=await this.getResource(e,null,"GET",null,null);return l})),d()(this,"exportDB",(async()=>{let e="todo/export";const l=await this.getResource(e,null,"GET",null,null);return l})),d()(this,"importDB",(async e=>{let l="todo/import";const t=await this.getResource(l,e,"POST",null,null);return t})),d()(this,"deleteAll",(async()=>{let e="todo/deleteAll";const l=await this.getResource(e,null,"GET",null,null);return l}))}}const m=new c,p=(0,a.aZ)({name:"FormCreate",setup(){let e=(0,u.iH)(""),l=(0,u.iH)(""),t=(0,u.iH)(!1),a=(0,u.iH)(""),n=(0,u.iH)("");const o=async()=>{const n=new FormData;n.append("name",e.value),n.append("content",l.value),n.append("isImportant",t.value),n.append("isDone",!1),n.append("image",a.value),await m.createTODO(n),e.value="",l.value="",t.value=!1,a.value=""},s=async()=>{await m.exportDB(),i("uploads/export.json","export.json")},d=(e,l)=>{let t=document.createElement("a");return t.href=e,t.setAttribute("download",l),t.className="download-js",t.innerHTML="downloading...",t.style.display="none",t.addEventListener("click",(e=>e.stopPropagation()),{once:!0}),t},i=(e,l)=>{let t=d(e,l);return document.body.appendChild(t),setTimeout((function(){t.click()}),66),!0},r=async()=>{const e=new FormData;e.append("uploadedFile",n.value),await m.importDB(e)},c=async()=>{await m.deleteAll()};return{name:e,content:l,createTODO:o,important:t,photo:a,exportDB:s,importDB:r,file:n,deleteAll:c}}});var w=t(1639),v=t(4458),f=t(3190),W=t(3119),b=t(3837),g=t(1006),h=t(4455),D=t(9984),y=t.n(D);const C=(0,w.Z)(p,[["render",o]]),V=C;y()(p,"components",{QCard:v.Z,QCardSection:f.Z,QInput:W.Z,QFile:b.Z,QCheckbox:g.Z,QBtn:h.Z});var k=t(6970),_=t(1957);const q=["src"],Z={class:"text-grey-8 q-gutter-xs"},x=(0,a._)("div",{class:"text-h6"},"Редактирование",-1);function O(e,l,t,n,o,u){const s=(0,a.up)("q-input"),d=(0,a.up)("q-select"),i=(0,a.up)("CalendarVue"),r=(0,a.up)("q-btn"),c=(0,a.up)("Statics"),m=(0,a.up)("q-card"),p=(0,a.up)("q-item-label"),w=(0,a.up)("q-item-section"),v=(0,a.up)("q-item"),f=(0,a.up)("q-list"),W=(0,a.up)("q-card-section"),b=(0,a.up)("q-file"),g=(0,a.up)("q-checkbox"),h=(0,a.up)("q-card-actions"),D=(0,a.up)("q-dialog"),y=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(m,{class:"q-pa-md q-mt-md q-mb-md wrapper-sort-filter"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{outlined:"",modelValue:n.search,"onUpdate:modelValue":l[0]||(l[0]=e=>n.search=e),label:"Поиск",dense:""},null,8,["modelValue"]),(0,a.Wm)(d,{outlined:"",modelValue:n.sortModel,"onUpdate:modelValue":l[1]||(l[1]=e=>n.sortModel=e),options:n.sortOptions,label:"Сортировка",class:"sort",dense:""},null,8,["modelValue","options"]),(0,a.Wm)(d,{outlined:"",modelValue:n.filterModel,"onUpdate:modelValue":l[2]||(l[2]=e=>n.filterModel=e),options:n.filterOptions,label:"Фильтрация",class:"filter",dense:""},null,8,["modelValue","options"]),(0,a.Wm)(i),(0,a.Wm)(r,{color:"primary",label:"Показать все",dense:"",style:{width:"160px"},onClick:l[3]||(l[3]=e=>n.showAll())}),(0,a.Wm)(c)])),_:1}),(0,a.Wm)(f,{separator:"",class:"q-mt-md todo-list"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.todoElements,(e=>(0,a.wy)(((0,a.wg)(),(0,a.j4)(v,{key:e.id,class:(0,k.C_)([{important:e.isImportant,isDone:e.isDone},"todo-item"])},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[null!=e.filename?((0,a.wg)(),(0,a.j4)(p,{key:0},{default:(0,a.w5)((()=>[(0,a._)("img",{src:n.getImage(e),style:{width:"200px","border-radius":"5px"}},null,8,q)])),_:2},1024)):(0,a.kq)("",!0),(0,a.Wm)(p,{lines:"1",style:{"font-size":"24px","font-weight":"bold"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,k.zw)(e.name),1)])),_:2},1024),(0,a.Wm)(p,{overline:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,k.zw)(e.content),1)])),_:2},1024),(0,a.Wm)(p,{style:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center","margin-top":"40px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{caption:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,k.zw)(n.formatDate(e.datecreate)),1)])),_:2},1024),(0,a._)("div",Z,[(0,a.Wm)(r,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"delete",color:"negative",onClick:l=>n.deleteTodo(e.id)},null,8,["onClick"]),(0,a.Wm)(r,{class:"gt-xs",size:"12px",flat:"",dense:"",round:"",icon:"done",color:"positive",onClick:l=>n.changeIsDone(e.id,!e.isDone)},null,8,["onClick"]),(0,a.Wm)(r,{size:"12px",flat:"",dense:"",round:"",icon:"edit",color:"primary",onClick:l=>n.openWindow(e)},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"])),[[_.F8,n.formatDateCalendar(e.datecreate)==n.currentCaledanDay||""==n.currentCaledanDay]]))),128))])),_:1}),(0,a.Wm)(D,{modelValue:n.windowChange,"onUpdate:modelValue":l[8]||(l[8]=e=>n.windowChange=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{style:{width:"700px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[x])),_:1}),(0,a.Wm)(W,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{outlined:"",modelValue:n.name,"onUpdate:modelValue":l[4]||(l[4]=e=>n.name=e),label:"Название",dense:"",class:"q-mt-md"},null,8,["modelValue"]),(0,a.Wm)(s,{outlined:"",modelValue:n.content,"onUpdate:modelValue":l[5]||(l[5]=e=>n.content=e),label:"Контент",dense:"",class:"q-mt-md"},null,8,["modelValue"]),(0,a.Wm)(b,{outlined:"",modelValue:n.photo,"onUpdate:modelValue":l[6]||(l[6]=e=>n.photo=e),label:"Фотография",dense:"",class:"q-mt-md"},null,8,["modelValue"]),(0,a.Wm)(g,{modelValue:n.important,"onUpdate:modelValue":l[7]||(l[7]=e=>n.important=e),label:"Важное",class:"q-mt-md"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(h,{align:"center",class:"bg-white text-teal"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(r,{color:"primary",label:"OK",style:{width:"100%"},onClick:n.edit},null,8,["onClick"]),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}t(702);var Q=t(3100);function U(e,l,t,n,o,u){const s=(0,a.up)("q-btn"),d=(0,a.up)("q-date"),i=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(s,{color:"primary",label:"Календарь",onClick:l[0]||(l[0]=e=>n.calendarWindow=!0),dense:"",style:{width:"140px"}}),(0,a.Wm)(i,{modelValue:n.calendarWindow,"onUpdate:modelValue":l[2]||(l[2]=e=>n.calendarWindow=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:n.currentDate,"onUpdate:modelValue":l[1]||(l[1]=e=>n.currentDate=e),events:n.events,"event-color":e.orange},null,8,["modelValue","events","event-color"])])),_:1},8,["modelValue"])],64)}var T=t(4170);const H={name:"CalendarVue",setup(){const e=(0,Q.oR)(),l=(0,u.iH)(""),t=(0,u.iH)([]),n=(0,u.iH)(!1);(0,a.bv)((async()=>{l.value=o(Date.now()/1e3);const e=await m.getAllDates();e.forEach((e=>{t.value.push(o(e))}))})),(0,a.YP)((()=>l.value),((l,t)=>{console.log(l),e.commit("addCurrentCalendarDay",l),n.value=!1}));const o=e=>T.ZP.formatDate(1e3*e,"YYYY/MM/DD");return{currentDate:l,events:t,calendarWindow:n}}};var I=t(7743),S=t(6711);const Y=(0,w.Z)(H,[["render",U]]),j=Y;y()(H,"components",{QBtn:h.Z,QDialog:I.Z,QDate:S.Z});const P=(0,a.Uk)("Количество за неделю"),E=(0,a.Uk)("Количество важных за неделю"),F=(0,a.Uk)("Количество сделанных за неделю"),z=(0,a.Uk)("Количество за все время"),M=(0,a.Uk)("Количество важных за все время"),R=(0,a.Uk)("Количество сделанных за все время");function A(e,l,t,n,o,u){const s=(0,a.up)("q-btn"),d=(0,a.up)("q-item-label"),i=(0,a.up)("q-item-section"),r=(0,a.up)("q-item"),c=(0,a.up)("q-list"),m=(0,a.up)("q-card"),p=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(s,{color:"primary",label:"Статистика",onClick:l[0]||(l[0]=e=>n.windowStatics=!0),dense:"",style:{width:"140px"}}),(0,a.Wm)(p,{modelValue:n.windowStatics,"onUpdate:modelValue":l[1]||(l[1]=e=>n.windowStatics=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{style:{width:"1100px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"statics",separator:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"statics-element"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"number"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,k.zw)(n.staticsObject.allOfWeek),1)])),_:1}),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[P])),_:1})])),_:1})])),_:1}),(0,a.Wm)(r,{class:"statics-element",style:{"border-color":"red"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"number"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,k.zw)(n.staticsObject.importantOfWeek),1)])),_:1}),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[E])),_:1})])),_:1})])),_:1}),(0,a.Wm)(r,{class:"statics-element",style:{"border-color":"green"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"number"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,k.zw)(n.staticsObject.doneOfWeek),1)])),_:1}),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[F])),_:1})])),_:1})])),_:1}),(0,a.Wm)(r,{class:"statics-element"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"number"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,k.zw)(n.staticsObject.allTodo),1)])),_:1}),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[z])),_:1})])),_:1})])),_:1}),(0,a.Wm)(r,{class:"statics-element",style:{"border-color":"red"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"number"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,k.zw)(n.staticsObject.allImportant),1)])),_:1}),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[M])),_:1})])),_:1})])),_:1}),(0,a.Wm)(r,{class:"statics-element",style:{"border-color":"green"}},{default:(0,a.w5)((()=>[(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"number"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,k.zw)(n.staticsObject.allDone),1)])),_:1}),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[R])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}const B={name:"CalendarVue",setup(){const e=(0,u.iH)(!1),l=(0,u.iH)({});return(0,a.bv)((async()=>{const e=await m.getStatics();l.value=e})),(0,a.YP)((()=>e.value),(async()=>{const e=await m.getStatics();l.value=e})),{windowStatics:e,staticsObject:l}}};var L=t(3246),G=t(490),$=t(1233),K=t(3115);const N=(0,w.Z)(B,[["render",A]]),J=N;y()(B,"components",{QBtn:h.Z,QDialog:I.Z,QCard:v.Z,QList:L.Z,QItem:G.Z,QItemSection:$.Z,QItemLabel:K.Z});const X={components:{CalendarVue:j,Statics:J},setup(){const e=(0,Q.oR)(),l=(0,a.Fl)((()=>e.getters["getCurrentCalendarDay"])),t=(0,u.iH)("");let n=[],o=(0,u.iH)([]),s=(0,u.iH)(!1),d=(0,u.iH)(""),i=(0,u.iH)(""),r=(0,u.iH)(""),c=(0,u.iH)(!1),p=(0,u.iH)(0),w=(0,u.iH)(""),v=[{label:"Сначала новые",value:"new"},{label:"Сначала старые",value:"old"},{label:"Сначала важные",value:"important"},{label:"Сначала сделанные",value:"done"},{label:"Сбросить",value:"removeSort"}],f=(0,u.iH)(""),W=[{label:"Только важные",value:"important"},{label:"Только сделанные",value:"done"},{label:"Только с фотографиями",value:"photo"},{label:"Сбросить",value:"removeFilter"}];(0,a.YP)((()=>t.value),((e,l)=>{b(e)})),(0,a.YP)((()=>w.value),((e,l)=>{h(e)})),(0,a.YP)((()=>f.value),((e,l)=>{g(e)})),(0,a.bv)((async()=>{k()})),setInterval((async()=>{k()}),1e3);const b=e=>{if(""==e)o.value=[...n],""!=f.value&&g(f.value),""!=w.value&&h(w.value);else{const l=o.value.filter((l=>-1!=l.name.indexOf(e)||-1!=l.content.indexOf(e)));o.value=[...l]}},g=e=>{if("important"==e.value){const e=n.filter((e=>1==e.isImportant));o.value=e}else if("done"==e.value){const e=n.filter((e=>1==e.isDone));o.value=e}else if("removeFilter"==e.value)o.value=[...n],w.value="",f.value="";else if("photo"==e.value){const e=n.filter((e=>null!=e.filename));o.value=e}""!=t.value&&b(t.value)},h=e=>{o.value=[...n],""!=f.value&&g(f.value),"important"==e.value?o.value.sort(((e,l)=>l.isImportant-e.isImportant)):"done"==e.value?o.value.sort(((e,l)=>l.isDone-e.isDone)):"removeSort"==e.value?(o.value=[...n],w.value="",f.value=""):"new"==e.value?o.value.sort(((e,l)=>l.datecreate-e.datecreate)):"old"==e.value&&o.value.sort(((e,l)=>e.datecreate-l.datecreate)),""!=t.value&&b(t.value)},D=async e=>{await m.deleteTODO(e),k()},y=async(e,l)=>{const t=new FormData;t.append("id",e),t.append("isDone",l),await m.changeIsDone(t),await k()},C=async e=>{s.value=!0,d.value=e.name,i.value=e.content,r.value=e.photo,c.value=e.isImportant,p.value=e.id},V=async()=>{const e=new FormData;e.append("name",d.value),e.append("content",i.value),e.append("isImportant",c.value),e.append("isDone",!1),e.append("image",r.value),e.append("id",p.value),await m.editTodo(e),k()},k=async()=>{const e=await m.getTodoElement();o.value=e,n=[...e],""!=t.value&&b(t.value),""!=f.value&&g(f.value),""!=w.value&&h(w.value)},_=e=>`uploads/${e.filename}`,q=e=>T.ZP.formatDate(1e3*e,"YYYY-DD-MM HH:mm"),Z=e=>T.ZP.formatDate(1e3*e,"YYYY/MM/DD"),x=()=>{e.commit("addCurrentCalendarDay","")};return{todoElements:o,deleteTodo:D,changeIsDone:y,windowChange:s,name:d,content:i,photo:r,important:c,openWindow:C,edit:V,getImage:_,sortOptions:v,sortModel:w,formatDate:q,filterModel:f,filterOptions:W,currentCaledanDay:l,formatDateCalendar:Z,showAll:x,search:t}}};var ee=t(8542),le=t(1821),te=t(2146);const ae=(0,w.Z)(X,[["render",O]]),ne=ae;y()(X,"components",{QCard:v.Z,QInput:W.Z,QSelect:ee.Z,QBtn:h.Z,QList:L.Z,QItem:G.Z,QItemSection:$.Z,QItemLabel:K.Z,QDialog:I.Z,QCardSection:f.Z,QFile:b.Z,QCheckbox:g.Z,QCardActions:le.Z}),y()(X,"directives",{ClosePopup:te.Z});const oe=(0,a.aZ)({name:"IndexPage",components:{FormCreateVue:V,TodoList:ne}});var ue=t(9885);const se=(0,w.Z)(oe,[["render",n]]),de=se;y()(oe,"components",{QPage:ue.Z})}}]);